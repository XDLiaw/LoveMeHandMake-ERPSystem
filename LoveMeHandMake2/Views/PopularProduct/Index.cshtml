@model LoveMeHandMake2.Models.ViewModels.PopularProductViewModel
@using LoveMeHandMake2.Helper

@{
    ViewBag.Title = "热门产品";
}

<h2>热门产品</h2>


@using (Html.BeginForm("Index", "PopularProduct", FormMethod.Post))
{
    <div class="container breadcrumb">
        <div class="col-md-3">
            @Html.DropDownList("SearchStoreID", (IEnumerable<SelectListItem>)ViewBag.StoreList, htmlAttributes: new { id = "SearchStoreID", @class = "form-control" })
        </div>
        <div class="col-md-3">
            @Html.DropDownList("SearchProductCategoryID", (IEnumerable<SelectListItem>)ViewBag.ProductCategoryList, htmlAttributes: new { id = "SearchProductCategoryID", @class = "form-control" })
        </div>
        <div class="col-md-2">
            @Html.EditorFor(model => model.SearchDateStart, new { htmlAttributes = new { id = "SearchDateStart", name = "SearchDateStart", @class = "form-control calendarBox", placeholder = "日期(起)" } })
        </div>
        <div class="col-md-2">
            @Html.EditorFor(model => model.SearchDateEnd, new { htmlAttributes = new { id = "SearchDateEnd", name = "SearchDateEnd", @class = "form-control calendarBox", placeholder = "日期(讫)" } })
        </div>
        <div class="col-md-2">
            <input type="submit" value="搜寻" class="btn btn-default" />
        </div>
    </div>
}

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.productList.FirstOrDefault().ImageName)</th>
            <th>@Html.DisplayNameFor(model => model.productList.FirstOrDefault().CategoryName)</th>
            <th>@Html.DisplayNameFor(model => model.productList.FirstOrDefault().Name)</th>
            <th>@Html.DisplayNameFor(model => model.productList.FirstOrDefault().Price)</th>
            <th>@Html.DisplayNameFor(model => model.productList.FirstOrDefault().Amount)</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.productList != null)
        {
            foreach (var item in Model.productList)
            {
                <tr>                    
                    <td><img src="data:image;base64,@ProductImageHelper.GetImageBase64String(item.ImageName)" style="max-width:100px; max-height:100px;" /></td>
                    <td>@Html.DisplayFor(modelItem => item.CategoryName)</td>
                    <td>@Html.DisplayFor(modelItem => item.Name)</td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Price)
                        @(item.Unit == 1 ? "点" : "豆")
                    </td>
                    <td>@Html.DisplayFor(modelItem => item.Amount)</td>
                </tr>
            }
        }
    </tbody>
</table>